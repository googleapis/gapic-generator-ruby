<%- assert_locals namespace -%>
<%= render partial: "shared/header" -%>

<%- if instance_variable_defined? :@requires -%>
<%= @requires -%>
<%- end -%>

<%- namespace_components = namespace.split("::").reject(&:empty?) -%>
<%- namespace_components.each_with_index do |ns, i| -%>
<%= indent "module #{ns}", i*2 %>
<%- end -%>
<%= indent yield, namespace_components.count*2 %>
<%- namespace_components.count.times do |i| -%>
<%= indent "end", (namespace_components.count-1-i)*2 %>
<%- end -%>
<%- if instance_variable_defined? :@footer -%>

<%= @footer -%>
<%- end -%>
